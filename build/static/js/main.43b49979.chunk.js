(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},22:function(e,n,t){},23:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(1),o=t(15),a=t.n(o),u=t(5),i=t(3),d=(t(21),function(e){return Object(c.jsxs)("form",{className:"form__filter",children:["Filter by name: ",Object(c.jsx)("input",{onChange:e.handleInputSearchWord,value:e.searchWord})]})}),s=(t(22),function(e){return Object(c.jsxs)("form",{className:"form__add",children:[Object(c.jsxs)("div",{className:"form__add_name form__add__item",children:["name: ",Object(c.jsx)("input",{onChange:e.handleInputName,value:e.newName})]}),Object(c.jsxs)("div",{className:"form__add_number form__add__item",children:["number: ",Object(c.jsx)("input",{onChange:e.handleInputNumber,value:e.newNumber})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{className:"btn__add",type:"submit",onClick:e.handleSubmit,children:"add"})})]})}),l=(t(23),function(e){var n=e.person,t=e.handleDelete;return Object(c.jsxs)("form",{className:"list__item",children:[n.name,": ",n.number,Object(c.jsx)("button",{type:"submit",className:"btn__delete",onClick:function(e){return t(e,n)},children:"delete"})]})}),m=function(e){var n=e.message;if(null===n[0])return null;return Object(c.jsx)("div",{style:"success"===n[1]?{border:"green 3px solid",color:"green",padding:"0.5rem",margin:"1rem",borderRadius:5,backgroundColor:"#cccccc",fontSize:20}:{border:"red 3px solid",color:"red",padding:"0.5rem",margin:"1rem",borderRadius:5,backgroundColor:"#cccccc",fontSize:20},children:n[0]})},f=t(4),b=t.n(f),h="https://protected-escarpment-15792.herokuapp.com/api/persons",j=function(){return b.a.get(h).then((function(e){return e.data}))},p=function(e){return b.a.post(h,e).then((function(e){return e.data}))},O=function(e){return b.a.delete("".concat(h,"/").concat(e))},x=function(e,n){return b.a.put("".concat(h,"/").concat(e),n)},_=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],a=Object(r.useState)(""),f=Object(i.a)(a,2),b=f[0],h=f[1],_=Object(r.useState)(""),v=Object(i.a)(_,2),g=v[0],w=v[1],N=Object(r.useState)(""),k=Object(i.a)(N,2),S=k[0],y=k[1],C=Object(r.useState)([null,null]),I=Object(i.a)(C,2),D=I[0],T=I[1],W=function(e,n){e.preventDefault(),window.confirm("do you want delete ".concat(n.name,"?"))&&O(n.id).then((function(){o(t.filter((function(e){return e.id!==n.id})))})).catch((function(e){T(["Information of ".concat(n.name," has already been removed from server."),"error"]),setTimeout((function(){T(E())}),5e3),o(t.filter((function(e){return e.id!==n.id})))}))},z=function(e){return t.find((function(n){return n.name===e}))},E=function(){return[null,null]};return Object(r.useEffect)((function(){console.log("attempting the initial fetch"),j().then((function(e){o(e),console.log("fetched and set the initial data")}))}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(m,{message:D}),Object(c.jsx)(d,{handleInputSearchWord:function(e){y(e.target.value)},searchWord:S}),Object(c.jsx)("h3",{children:"add a new contact"}),Object(c.jsx)(s,{handleInputName:function(e){h(e.target.value)},newName:b,handleInputNumber:function(e){w(e.target.value)},newNumber:g,handleSubmit:function(e){if(e.preventDefault(),z(b)){if(window.confirm("".concat(b," is already added to the phonebook. Do you want to replace the old number with a new one?"))){var n=t.filter((function(e){return e.name===b}))[0],c=Object(u.a)(Object(u.a)({},n),{},{number:g});x(n.id,c).then((function(e){return e.data})).then((function(e){o(t.map((function(t){return t.id!==n.id?t:e}))),h(""),w(""),T(["Updated ".concat(e.name),"success"]),setTimeout((function(){T(E())}),3e3)})).catch((function(e){T(["Information of ".concat(c.name," has already been removed from server."),"error"]),setTimeout((function(){T(E())}),5e3),o(t.filter((function(e){return e.id!==n.id})))}))}}else p({name:b,number:g}).then((function(e){o(t.concat(e)),h(""),w(""),T(["Added ".concat(e.name),"success"]),setTimeout((function(){T(E())}),3e3)}))}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)("ul",{children:function(e){return""===e?t:t.filter((function(n){return n.name.toLowerCase().includes(e.toLowerCase())}))}(S).map((function(e){return Object(c.jsx)("li",{children:Object(c.jsx)(l,{person:e,handleDelete:W})},"".concat(e.name,"+").concat(e.number))}))})]})};a.a.render(Object(c.jsx)(_,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.43b49979.chunk.js.map